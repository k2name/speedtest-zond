
RGraph=window.RGraph||{isrgraph:true,isRGraph:true,rgraph:true};RGraph.Line=function(conf)
{var id=conf.id;var canvas=document.getElementById(id);var data=conf.data;this.id=id;this.canvas=canvas;this.context=this.canvas.getContext('2d');this.canvas.__object__=this;this.type='line';this.max=0;this.coords=[];this.coords2=[];this.coords.key=[];this.coordsText=[];this.coordsSpline=[];this.coordsAxes={xaxis:[],yaxis:[]};this.hasnegativevalues=false;this.isRGraph=true;this.isrgraph=true;this.rgraph=true;this.uid=RGraph.createUID();this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.createUID();this.colorsParsed=false;this.original_colors=[];this.firstDraw=true;this.properties={backgroundBarsCount:null,backgroundBarsColor1:'rgba(0,0,0,0)',backgroundBarsColor2:'rgba(0,0,0,0)',backgroundGrid:1,backgroundGridLinewidth:1,backgroundGridHsize:25,backgroundGridVsize:25,backgroundGridColor:'#ddd',backgroundGridVlines:true,backgroundGridHlines:true,backgroundGridBorder:true,backgroundGridAutofit:true,backgroundGridAutofitAlign:true,backgroundGridHlinesCount:5,backgroundGridVlinesCount:null,backgroundGridDashed:false,backgroundGridDotted:false,backgroundHbars:null,backgroundImage:null,backgroundImageStretch:true,backgroundImageX:null,backgroundImageY:null,backgroundImageW:null,backgroundImageH:null,backgroundImageAlign:null,backgroundColor:null,xaxis:true,xaxisTitle:'',xaxisTitleBold:null,xaxisTitleSize:null,xaxisTitleFont:null,xaxisTitleColor:null,xaxisTitleItalic:null,xaxisTitlePos:null,xaxisTitleX:null,xaxisTitleY:null,xaxisPosition:'bottom',xaxisPositionValue:0,xaxisTickmarks:null,xaxisLabels:null,xaxisLabelsBold:null,xaxisLabelsItalic:null,xaxisLabelsColor:null,xaxisLabelsSize:null,xaxisLabelsFont:null,xaxisLabelsIngraph:null,xaxisLabelsOffsetx:0,xaxisLabelsOffsety:0,xaxisLabelsInside:false,xaxisLabelsInsideColor:'rgba(255,255,255,0.5)',xaxisLabelsInsideBorder:false,xaxisLabelsAngle:0,xaxisTickmarksLast:true,xaxisTickmarksDirection:-1,xaxisTickmarksCount:(data&&typeof data[0]==='number'?data.length-1:(typeof data[0]==='object'&&data[0]&&typeof data[0][0]==='number'?data[0].length-1:20)),yaxis:true,yaxisTickmarksCount:5,yaxisPosition:'left',yaxisScaleUnitsPost:'',yaxisScaleUnitsPre:'',yaxisScaleZerostart:true,yaxisScaleDecimals:null,yaxisScalePoint:'.',yaxisScaleThousand:',',yaxisScaleInvert:false,yaxisTickmarksLast:true,yaxisLabels:true,yaxisLabelsCount:5,yaxisLabelsInside:false,yaxisLabelsInsideBorder:false,yaxisLabelsOffsetx:0,yaxisLabelsOffsety:0,yaxisLabelsBold:null,yaxisLabelsSize:null,yaxisLabelsFont:null,yaxisLabelsColor:null,yaxisLabelsItalic:null,yaxisTitle:'',yaxisTitlePos:null,yaxisTitleX:null,yaxisTitleY:null,yaxisTitleBold:null,yaxisTitleSize:null,yaxisTitleFont:null,yaxisTitleColor:null,yaxisTitleItalic:null,yaxisScaleMin:0,yaxisScaleMax:null,labelsAbove:false,labelsAboveDecimals:null,labelsAboveSize:null,labelsAboveColor:null,labelsAboveFont:null,labelsAboveBold:null,labelsAboveItalic:null,labelsAboveBackground:'rgba(255,255,255,0.7)',labelsAboveBorder:false,labelsAboveOffsety:5,labelsAboveUnitsPre:'',labelsAboveUnitsPost:'',labelsAboveSpecific:null,linewidth:2.001,colors:['red','#0f0','#00f','#f0f','#ff0','#0ff','green','pink','blue','black'],tickmarksStyle:'none',tickmarksLinewidth:null,tickmarksSize:3,tickmarksStyleDotStroke:'white',tickmarksStyleDotFill:null,tickmarksStyleDotLinewidth:3,tickmarksStyleImage:null,tickmarksStyleImageHalign:'center',tickmarksStyleImageValign:'center',tickmarksStyleImageOffsetx:0,tickmarksStyleImageOffsety:0,marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,marginInner:0,filledColors:null,textBold:false,textItalic:false,textSize:12,textColor:'black',textFont:'Arial, Verdana, sans-serif',textAccessible:true,textAccessibleOverflow:'visible',textAccessiblePointerevents:false,title:'',titleBackground:null,titleHpos:null,titleVpos:null,titleFont:null,titleSize:null,titleColor:null,titleBold:null,titleItalic:null,titleX:null,titleY:null,titleHalign:null,titleValign:null,shadow:true,shadowOffsetx:2,shadowOffsety:2,shadowBlur:3,shadowColor:'rgba(128,128,128,0.5)',tooltips:null,tooltipsHotspotXonly:false,tooltipsHotspotSize:5,tooltipsEffect:'fade',tooltipsCssClass:'RGraph_tooltip',tooltipsEvent:'onmousemove',tooltipsHighlight:true,tooltipsCoordsPage:false,highlightStyle:null,highlightStroke:'gray',highlightFill:'white',highlightPointRadius:2,stepped:false,key:null,keyBackground:'white',keyPosition:'graph',keyHalign:null,keyShadow:false,keyShadowColor:'#666',keyShadowBlur:3,keyShadowOffsetx:2,keyShadowOffsety:2,keyPositionMarginBoxed:false,keyPositionX:null,keyPositionY:null,keyColorShape:'square',keyRounded:true,keyLinewidth:1,keyColors:null,keyInteractive:false,keyInteractiveHighlightChartStroke:'rgba(255,0,0,0.3)',keyInteractiveHighlightLabel:'rgba(255,0,0,0.2)',keyLabelsFont:null,keyLabelsSize:null,keyLabelsColor:null,keyLabelsBold:null,keyLabelsItalic:null,keyLabelsOffsetx:0,keyLabelsOffsety:0,contextmenu:null,crosshairs:false,crosshairsColor:'#333',crosshairsHline:true,crosshairsVline:true,annotatable:false,annotatableColor:'black',annotatableLinewidth:1,filled:false,filledRange:false,filledRangeThreshold:null,filledRangeThresholdColors:['red','green'],filledAccumulative:true,variant:null,axes:true,axesAbove:false,axesColor:'black',axesLinewidth:1,backdrop:false,backdropSize:30,backdropAlpha:0.2,resizable:false,resizableHandleAdjust:[0,0],resizableHandleBackground:null,adjustable:false,adjustableOnly:null,redraw:true,outofbounds:false,outofboundsClip:false,animationFactor:1,animationUnfoldX:false,animationUnfoldY:true,animationUnfoldInitial:2,animationTraceClip:1,animationTraceCenter:false,spline:false,lineVisible:[],errorbars:false,errorbarsColor:'black',errorbarsCapped:true,errorbarsCappedWidth:12,errorbarsLinewidth:1,combinedEffect:null,combinedEffectOptions:null,combinedEffectCallback:null,clearto:'rgba(0,0,0,0)',dotted:false,dashed:false}
for(var i=1;i<arguments.length;++i){if(typeof(arguments[i])=='null'||!arguments[i]){arguments[i]=[];}}
this.original_data=[];if(typeof conf==='object'&&conf.data){if(typeof conf.data[0]==='number'||RGraph.isNull(conf.data[0])){this.original_data[0]=RGraph.arrayClone(conf.data);}else{for(var i=0;i<conf.data.length;++i){this.original_data[i]=RGraph.arrayClone(conf.data[i]);}}}else{for(var i=1;i<arguments.length;++i){if(arguments[1]&&typeof(arguments[1])=='object'&&arguments[1][0]&&typeof(arguments[1][0])=='object'&&arguments[1][0].length){var tmp=[];for(var i=0;i<arguments[1].length;++i){tmp[i]=RGraph.arrayClone(arguments[1][i]);}
for(var j=0;j<tmp.length;++j){this.original_data[j]=RGraph.arrayClone(tmp[j]);}}else{this.original_data[i-1]=RGraph.arrayClone(arguments[i]);}}}
if(!this.canvas){alert('[LINE] Fatal error: no canvas support');return;}
for(var i=0;i<this.original_data.length;++i){for(var j=0;j<this.original_data[i].length;++j){if(typeof this.original_data[i][j]==='string'){this.original_data[i][j]=parseFloat(this.original_data[i][j]);}}}
this.data_arr=RGraph.arrayLinearize(this.original_data);for(var i=0;i<this.data_arr.length;++i){this['$'+i]={};}
if(!this.canvas.__rgraph_aa_translated__){this.context.translate(0.5,0.5);this.canvas.__rgraph_aa_translated__=true;}
var prop=this.properties;this.path=RGraph.pathObjectFunction;if(RGraph.Effects&&typeof RGraph.Effects.decorate==='function'){RGraph.Effects.decorate(this);}
this.responsive=RGraph.responsive;this.set=function(name)
{var value=typeof arguments[1]==='undefined'?null:arguments[1];if(arguments.length===1&&typeof arguments[0]==='object'){for(i in arguments[0]){if(typeof i==='string'){this.set(i,arguments[0][i]);}}
return this;}
prop[name]=value;return this;};this.get=function(name)
{return prop[name];};this.draw=function()
{if(typeof(prop.backgroundImage)=='string'){RGraph.drawBackgroundImage(this);}
RGraph.fireCustomEvent(this,'onbeforedraw');if(!this.colorsParsed){this.parseColors();this.colorsParsed=true;}
this.marginLeft=prop.marginLeft;this.marginRight=prop.marginRight;this.marginTop=prop.marginTop;this.marginBottom=prop.marginBottom;this.data=RGraph.arrayClone(this.original_data);this.max=0;if(prop.filled&&!prop.filledRange&&this.data.length>1&&prop.filledAccumulative){var accumulation=[];for(var set=0;set<this.data.length;++set){for(var point=0;point<this.data[set].length;++point){this.data[set][point]=Number(accumulation[point]?accumulation[point]:0)+this.data[set][point];accumulation[point]=this.data[set][point];}}}
if(prop.yaxisScaleMax){this.max=prop.yaxisScaleMax;this.min=prop.yaxisScaleMin?prop.yaxisScaleMin:0;this.scale2=RGraph.getScale({object:this,options:{'scale.max':this.max,'scale.min':prop.yaxisScaleMin,'scale.strict':true,'scale.thousand':prop.yaxisScaleThousand,'scale.point':prop.yaxisScalePoint,'scale.decimals':prop.yaxisScaleDecimals,'scale.labels.count':prop.yaxisLabelsCount,'scale.round':prop.yaxisScaleRound,'scale.units.pre':prop.yaxisScaleUnitsPre,'scale.units.post':prop.yaxisScaleUnitsPost}});this.max=this.scale2.max?this.scale2.max:0;if(!prop.outofbounds){for(dataset=0;dataset<this.data.length;++dataset){if(RGraph.isArray(this.data[dataset])){for(var datapoint=0;datapoint<this.data[dataset].length;datapoint++){this.hasnegativevalues=(this.data[dataset][datapoint]<0)||this.hasnegativevalues;}}}}}else{this.min=prop.yaxisScaleMin?prop.yaxisScaleMin:0;for(dataset=0;dataset<this.data.length;++dataset){for(var datapoint=0;datapoint<this.data[dataset].length;datapoint++){this.max=Math.max(this.max,this.data[dataset][datapoint]?Math.abs(parseFloat(this.data[dataset][datapoint])):0);if(!prop.outofbounds){this.hasnegativevalues=(this.data[dataset][datapoint]<0)||this.hasnegativevalues;}}}
this.scale2=RGraph.getScale({object:this,options:{'scale.max':this.max,'scale.min':prop.yaxisScaleMin,'scale.thousand':prop.yaxisScaleThousand,'scale.point':prop.yaxisScalePoint,'scale.decimals':prop.yaxisScaleDecimals,'scale.labels.count':prop.yaxisLabelsCount,'scale.round':prop.yaxisScaleRound,'scale.units.pre':prop.yaxisScaleUnitsPre,'scale.units.post':prop.yaxisScaleUnitsPost,'scale.formatter':prop.yaxisScaleFormatter}});this.max=this.scale2.max?this.scale2.max:0;}
if(prop.contextmenu){RGraph.showContext(this);}
this.coords=[];this.coordsText=[];this.grapharea=this.canvas.height-this.marginTop-this.marginBottom;this.halfgrapharea=this.grapharea/2;this.halfTextHeight=prop.textSize/2;if(prop.variant=='3d'){RGraph.draw3DAxes(this);}
RGraph.Background.draw(this);if(prop.backgroundHbars&&prop.backgroundHbars.length>0){RGraph.drawBars(this);}
if(!prop.axesAbove){this.drawAxes();}
this.context.save()
this.context.beginPath();if(prop.animationTraceCenter){this.context.rect((this.canvas.width/2)*(1-prop.animationTraceClip),0,this.canvas.width*prop.animationTraceClip,this.canvas.height);}else{this.context.rect(0,0,this.canvas.width*prop.animationTraceClip,this.canvas.height);}
this.context.clip();for(var i=0,j=0,len=this.data.length;i<len;i++,j++){this.context.beginPath();if(!prop.filled){this.setShadow(i);}
if(prop.filledColors){if(typeof(prop.filledColors)=='object'&&prop.filledColors[j]){var fill=prop.filledColors[j];}else if(typeof(prop.filledColors)=='object'&&prop.filledColors.toString().indexOf('Gradient')>0){var fill=prop.filledColors;}else if(typeof(prop.filledColors)=='string'){var fill=prop.filledColors;}}else if(prop.filled){var fill=prop.colors[j];}else{var fill=null;}
if(prop.tickmarksStyle&&typeof(prop.tickmarksStyle)=='object'){var tickmarks=prop.tickmarksStyle[i];}else if(prop.tickmarksStyle&&typeof(prop.tickmarksStyle)=='string'){var tickmarks=prop.tickmarksStyle;}else if(prop.tickmarksStyle&&typeof(prop.tickmarksStyle)=='function'){var tickmarks=prop.tickmarksStyle;}else{var tickmarks=null;}
if(prop.outofboundsClip){this.path({path:'sa b r % % % % cl b',args:[0,this.marginTop,this.canvas.width,this.canvas.height-this.marginTop-this.marginBottom]});}
this.drawLine(this.data[i],prop.colors[j],fill,this.getLineWidth(j),tickmarks,i);if(prop.outofboundsClip){this.context.restore();}
this.context.stroke();}
if(prop.outofboundsClip){this.path({path:'sa b r % % % % cl b',args:[0,this.marginTop,this.canvas.width,this.canvas.height-this.marginTop-this.marginBottom]});}
if(prop.filled&&prop.filledAccumulative&&!prop.spline){for(var i=0;i<this.coords2.length;++i){this.context.beginPath();this.context.lineWidth=this.getLineWidth(i);this.context.strokeStyle=!this.hidden(i)?prop.colors[i]:'rgba(0,0,0,0)';for(var j=0,len=this.coords2[i].length;j<len;++j){if(j==0||this.coords2[i][j][1]==null||(this.coords2[i][j-1]&&this.coords2[i][j-1][1]==null)){this.context.moveTo(this.coords2[i][j][0],this.coords2[i][j][1]);}else{if(prop.stepped){this.context.lineTo(this.coords2[i][j][0],this.coords2[i][j-1][1]);}
this.context.lineTo(this.coords2[i][j][0],this.coords2[i][j][1]);}}
this.context.stroke();}
if(prop.tickmarksStyle){this.context.beginPath();this.context.fillStyle='white';for(var i=0,len=this.coords2.length;i<len;++i){this.context.beginPath();this.context.strokeStyle=prop.colors[i];for(var j=0;j<this.coords2[i].length;++j){if(typeof(this.coords2[i][j])=='object'&&typeof(this.coords2[i][j][0])=='number'&&typeof(this.coords2[i][j][1])=='number'){var tickmarks=typeof(prop.tickmarksStyle)=='object'?prop.tickmarksStyle[i]:prop.tickmarksStyle;this.drawTick(this.coords2[i],this.coords2[i][j][0],this.coords2[i][j][1],this.context.strokeStyle,false,j==0?0:this.coords2[i][j-1][0],j==0?0:this.coords2[i][j-1][1],tickmarks,j,i);}}}
this.context.stroke();this.context.fill();}}else if(prop.filled&&prop.filledAccumulative&&prop.spline){for(var i=0;i<this.coordsSpline.length;i+=1){this.context.beginPath();this.context.strokeStyle=prop.colors[i];this.context.lineWidth=this.getLineWidth(i);for(var j=0,len=this.coordsSpline[i].length;j<len;j+=1){var point=this.coordsSpline[i][j];j==0?this.context.moveTo(point[0],point[1]):this.context.lineTo(point[0],point[1]);}
this.context.stroke();}
for(var i=0,len=this.coords2.length;i<len;i+=1){for(var j=0,len2=this.coords2[i].length;j<len2;++j){if(typeof(this.coords2[i][j])=='object'&&typeof(this.coords2[i][j][0])=='number'&&typeof(this.coords2[i][j][1])=='number'){var tickmarks=typeof prop.tickmarksStyle=='object'&&!RGraph.isNull(prop.tickmarksStyle)?prop.tickmarksStyle[i]:prop.tickmarksStyle;this.context.strokeStyle=prop.colors[i];this.drawTick(this.coords2[i],this.coords2[i][j][0],this.coords2[i][j][1],prop.colors[i],false,j==0?0:this.coords2[i][j-1][0],j==0?0:this.coords2[i][j-1][1],tickmarks,j,i);}}}}
if(prop.outofboundsClip){this.context.restore();}
this.context.restore();this.context.beginPath();if(prop.axesAbove){this.drawAxes();}
this.drawLabels();this.drawRange();if(prop.key&&prop.key.length&&RGraph.drawKey){RGraph.drawKey(this,prop.key,prop.colors);}
if(prop.labelsAbove){this.drawAboveLabels();}
RGraph.drawInGraphLabels(this);if(prop.filled&&prop.filledRange&&this.data.length==2){this.context.beginPath();var len=this.coords.length/2;this.context.lineWidth=prop.linewidth;this.context.strokeStyle=this.hidden(0)?'rgba(0,0,0,0)':prop.colors[0];for(var i=0;i<len;++i){if(!RGraph.isNull(this.coords[i][1])){if(i==0){this.context.moveTo(this.coords[i][0],this.coords[i][1]);}else{this.context.lineTo(this.coords[i][0],this.coords[i][1]);}}}
this.context.stroke();this.context.beginPath();if(prop.colors[1]){this.context.strokeStyle=this.hidden(1)?'rgba(0,0,0,0)':prop.colors[1];}
for(var i=this.coords.length-1;i>=len;--i){if(!RGraph.isNull(this.coords[i][1])){if(i==(this.coords.length-1)){this.context.moveTo(this.coords[i][0],this.coords[i][1]);}else{this.context.lineTo(this.coords[i][0],this.coords[i][1]);}}}
this.context.stroke();}else if(prop.filled&&prop.filledRange){alert('[LINE] You must have only two sets of data for a filled range chart');}
if(prop.resizable){RGraph.allowResizing(this);}
RGraph.installEventListeners(this);if(this.firstDraw){this.firstDraw=false;RGraph.fireCustomEvent(this,'onfirstdraw');this.firstDrawFunc();}
RGraph.fireCustomEvent(this,'ondraw');return this;};this.exec=function(func)
{func(this);return this;};this.drawAxes=function()
{if(!prop.axes){return;}
RGraph.noShadow(this);this.context.lineWidth=prop.axesLinewidth+0.001;this.context.lineCap='square';this.context.lineJoin='miter';this.context.strokeStyle=prop.axesColor;coords={xaxis:{},yaxis:{}};this.context.beginPath();if(prop.xaxis){if(prop.xaxisPosition=='center'){coords.xaxis=[this.marginLeft,Math.round((this.grapharea/2)+this.marginTop),this.canvas.width-this.marginRight,Math.round((this.grapharea/2)+this.marginTop)];}else if(prop.xaxisPosition==='top'){coords.xaxis=[this.marginLeft,this.marginTop,this.canvas.width-this.marginRight,this.marginTop];}else{var y=Math.round(this.getYCoord(prop.yaxisScaleMin!=0?prop.yaxisScaleMin:0));if(prop.yaxisScaleInvert&&prop.yaxisScaleMin===0){y=this.getYCoord(this.scale2.max);}else if(prop.yaxisScaleInvert&&prop.yaxisScaleMin>=0){y=this.getYCoord(this.scale2.max);}else if(prop.yaxisScaleMin<0){y=this.getYCoord(0);}
coords.xaxis=[this.marginLeft,y,this.canvas.width-this.marginRight,y];}
this.context.moveTo(coords.xaxis[0],coords.xaxis[1]);this.context.lineTo(coords.xaxis[2],coords.xaxis[3]);this.coordsAxes=coords;}
if(prop.yaxis){if(prop.yaxisPosition==='left'){this.context.moveTo(this.marginLeft,this.marginTop);this.context.lineTo(this.marginLeft,this.canvas.height-this.marginBottom);}else{this.context.moveTo(this.canvas.width-this.marginRight,this.marginTop);this.context.lineTo(this.canvas.width-this.marginRight,this.canvas.height-this.marginBottom);}}
if(prop.xaxis&&prop.xaxisTickmarksCount>0){var xTickInterval=(this.canvas.width-this.marginLeft-this.marginRight)/prop.xaxisTickmarksCount;if(!xTickInterval||xTickInterval<=0){xTickInterval=(this.canvas.width-this.marginLeft-this.marginRight)/(prop.xaxisLabels&&prop.xaxisLabels.length?prop.xaxisLabels.length-1:10);}
for(x=this.marginLeft+(prop.yaxisPosition=='left'?xTickInterval:0);x<=(this.canvas.width-this.marginRight+1);x+=xTickInterval){if(prop.yaxisPosition=='right'&&x>=(this.canvas.width-this.marginRight-1)){break;}
if(!prop.xaxisTickmarksLast){if(prop.yaxisPosition=='left'&&x>=(this.canvas.width-this.marginRight-1)){break;}else if(prop.yaxisPosition=='right'&&x==this.marginLeft){continue;}}
var yStart=prop.xaxisPosition==='center'?(this.marginTop+(this.grapharea/2))-3:this.canvas.height-this.marginBottom;var yEnd=prop.xaxisPosition==='center'?yStart+6:this.canvas.height-this.marginBottom+3;if(prop.yaxisScaleMin>=0&&prop.xaxisPosition==='bottom'){var yStart=this.getYCoord(prop.yaxisScaleMin)-(prop.yaxisScaleMin>=0?0:3),yEnd=this.getYCoord(prop.yaxisScaleMin)+3;if(prop.yaxisScaleInvert){yStart=this.canvas.height-prop.marginBottom;yEnd=yStart+3;}}else if(prop.xaxisPosition=='center'){var yStart=Math.round((this.marginTop+(this.grapharea/2)))-3,yEnd=yStart+6;}else if(prop.xaxisPosition==='bottom'){var yStart=this.getYCoord(0)-(prop.yaxisScaleMin!==0?3:0),yEnd=this.getYCoord(0)+3;yEnd+=0;}else if(prop.xaxisPosition=='top'){yStart=this.marginTop-3;yEnd=this.marginTop;}
this.context.moveTo(Math.round(x),yStart);this.context.lineTo(Math.round(x),yEnd);}}else if(prop.yaxis&&prop.yaxisTickmarksCount>0){if(prop.yaxisTickmarksLast){if(prop.yaxisPosition==='left'){this.context.moveTo(this.marginLeft,Math.round(this.canvas.height-this.marginBottom));this.context.lineTo(this.marginLeft-3,Math.round(this.canvas.height-this.marginBottom));}else{this.context.moveTo(this.canvas.width-this.marginRight,Math.round(this.canvas.height-this.marginBottom));this.context.lineTo(this.canvas.width-this.marginRight+3,Math.round(this.canvas.height-this.marginBottom));}}}
var numyticks=prop.yaxisTickmarksCount;if(prop.yaxis&&numyticks>0){var counter=0,adjustment=0;if(prop.yaxisPosition==='right'){adjustment=(this.canvas.width-this.marginLeft-this.marginRight);}
if(prop.xaxisPosition=='center'){var interval=(this.grapharea/numyticks);var lineto=(prop.yaxisPosition=='left'?this.marginLeft:this.canvas.width-this.marginRight+3);for(y=this.marginTop;y<(this.grapharea/2)+this.marginTop;y+=interval){if(y<(this.grapharea/2)+this.marginTop){this.context.moveTo((prop.yaxisPosition=='left'?this.marginLeft-3:this.canvas.width-this.marginRight),Math.round(y));this.context.lineTo(lineto,Math.round(y));}}
for(y=this.marginTop+(this.halfgrapharea)+interval;y<=this.grapharea+this.marginTop;y+=interval){this.context.moveTo((prop.yaxisPosition=='left'?this.marginLeft-3:this.canvas.width-this.marginRight),Math.round(y));this.context.lineTo(lineto,Math.round(y));}}else if(prop.xaxisPosition=='top'){var interval=(this.grapharea/numyticks);var lineto=(prop.yaxisPosition=='left'?this.marginLeft:this.canvas.width-this.marginRight+3);for(y=this.marginTop+interval;y<=this.grapharea+this.marginBottom;y+=interval){this.context.moveTo((prop.yaxisPosition=='left'?this.marginLeft-3:this.canvas.width-this.marginRight),Math.round(y));this.context.lineTo(lineto,Math.round(y));}
if(!prop.xaxis&&prop.yaxisTickmarksLast){this.context.moveTo((prop.yaxisPosition=='left'?this.marginLeft-3:this.canvas.width-this.marginRight),this.marginTop);this.context.lineTo(lineto,this.marginTop);}}else{var lineto=(prop.yaxisPosition=='left'?this.marginLeft-3:this.canvas.width-this.marginRight+3);for(y=this.marginTop;y<(this.canvas.height-this.marginBottom)&&counter<numyticks;y+=((this.canvas.height-this.marginTop-this.marginBottom)/numyticks)){if(Math.round(y)!==Math.round(this.coordsAxes.xaxis[1])){this.context.moveTo(this.marginLeft+adjustment,Math.round(y));this.context.lineTo(lineto,Math.round(y));}
var counter=counter+1;}
if(prop.yaxisScaleMin<0){this.context.moveTo((prop.yaxisPosition=='left'?this.marginLeft:this.canvas.width-this.marginRight),Math.round(y));this.context.lineTo(lineto,Math.round(y));}}}else if(prop.xaxis&&prop.xaxisTickmarksCount>0){if(prop.yaxisPosition=='left'){this.context.moveTo(this.marginLeft,prop.xaxisPosition=='top'?this.marginTop:this.canvas.height-this.marginBottom);this.context.lineTo(this.marginLeft,prop.xaxisPosition=='top'?this.marginTop-3:this.canvas.height-this.marginBottom+3);}else{this.context.moveTo(this.canvas.width-this.marginRight,this.canvas.height-this.marginBottom);this.context.lineTo(this.canvas.width-this.marginRight,this.canvas.height-this.marginBottom+3);}}
this.context.stroke();this.context.beginPath();};this.drawLabels=function()
{this.context.strokeStyle='black';this.context.fillStyle=prop.textColor;this.context.lineWidth=1;RGraph.noShadow(this);var decimals=prop.yaxisScaleDecimals;var context=this.context;var canvas=this.canvas;var ymin=prop.yaxisScaleMin;var textConf=RGraph.getTextConf({object:this,prefix:'yaxisLabels'});if(prop.yaxisLabels&&prop.yaxisLabelsSpecific==null){var units_pre=prop.yaxisScaleUnitsPre;var units_post=prop.yaxisScaleUnitsPost;var xpos=prop.yaxisPosition=='left'?this.marginLeft-5:this.canvas.width-this.marginRight+5;var align=prop.yaxisPosition=='left'?'right':'left';var numYLabels=this.scale2.labels.length;var bounding=false;var bgcolor=prop.yaxisLabelsInside?'rgba(255,255,255,0.7)':'rgba(0,0,0,0)';var offsetx=prop.yaxisLabelsOffsetx;var offsety=prop.yaxisLabelsOffsety;if(prop.yaxisLabelsInside===true&&align=='left'){xpos-=10;align='right';bounding=prop.yaxisLabelsInsideBorder;}else if(prop.yaxisLabelsInside===true&&align=='right'){xpos+=10;align='left';bounding=prop.yaxisLabelsInsideBorder;}
if(prop.xaxisPosition=='center'){var half=this.grapharea/2;for(var i=0;i<this.scale2.labels.length;++i){RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:xpos+offsetx,y:this.marginTop+half-(((i+1)/numYLabels)*half)+offsety,valign:'center',halign:align,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',text:this.scale2.labels[i],tag:'scale'});}
for(var i=0;i<this.scale2.labels.length;++i){RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:xpos+offsetx,y:this.marginTop+half+(((i+1)/numYLabels)*half)+offsety,valign:'center',halign:align,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',text:'-'+this.scale2.labels[i],tag:'scale'});}
if(!prop.xaxis||ymin!=0||prop.yaxisScaleZerostart){RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:xpos+offsetx,y:this.marginTop+half+offsety,text:prop.yaxisScaleUnitsPre+ymin.toFixed(ymin===0?0:decimals)+prop.yaxisScaleUnitsPost,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',valign:'center',halign:align,tag:'scale'});}}else if(prop.xaxisPosition=='top'){var half=this.grapharea/2;if(prop.yaxisScaleInvert){for(var i=0;i<this.scale2.labels.length;++i){RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:xpos+offsetx,y:this.marginTop+((i/this.scale2.labels.length)*this.grapharea)+offsety,valign:'center',halign:align,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',text:'-'+this.scale2.labels[this.scale2.labels.length-(i+1)],tag:'scale'});}}else{for(var i=0;i<this.scale2.labels.length;++i){RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:xpos+offsetx,y:this.marginTop+(((i+1)/numYLabels)*this.grapharea)+offsety,valign:'center',halign:align,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',text:'-'+this.scale2.labels[i],tag:'scale'});}}
if((prop.yaxisScaleMin!=0||!prop.xaxis)||prop.yaxisScaleInvert||prop.yaxisScaleZerostart){RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:xpos+offsetx,y:prop.yaxisScaleInvert?this.canvas.height-this.marginBottom+offsety:this.marginTop+offsety,text:(prop.yaxisScaleMin!=0?'-':'')+RGraph.numberFormat({object:this,number:prop.yaxisScaleMin.toFixed(ymin===0?0:decimals),unitspre:units_pre,unitspost:units_post}),valign:'center',halign:align,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',tag:'scale'});}}else{if(prop.yaxisScaleInvert){RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:xpos+offsetx,y:this.marginTop+offsety,valign:'center',halign:align,bounding:bounding,boundingFill:bgcolor,text:RGraph.numberFormat({object:this,number:this.min.toFixed(prop.yaxisScaleMin===0?0:prop.yaxisScaleDecimals),unitspre:units_pre,unitspost:units_post}),tag:'scale'});for(var i=0,len=this.scale2.labels.length;i<len;++i){RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:xpos+offsetx,y:this.marginTop+(((i+1)/this.scale2.labels.length)*this.grapharea)+offsety,valign:'center',halign:align,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',text:this.scale2.labels[i],tag:'scale'});}}else{for(var i=0,len=this.scale2.labels.length;i<len;++i){RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:xpos+offsetx,y:this.marginTop+((i/this.scale2.labels.length)*this.grapharea)+offsety,valign:'center',halign:align,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',text:this.scale2.labels[this.scale2.labels.length-(i+1)],tag:'scale'});}}
if((prop.yaxisScaleMin!=0&&!prop.yaxisScaleInvert||prop.yaxisScaleZerostart)||!prop.xaxis){RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:xpos+offsetx,y:prop.yaxisScaleInvert?this.marginTop+offsety:this.canvas.height-this.marginBottom+offsety,text:RGraph.numberFormat({object:this,number:prop.yaxisScaleMin.toFixed(prop.yaxisScaleMin===0?0:prop.yaxisScaleDecimals),unitspre:units_pre,unitspost:units_post}),valign:'center',halign:align,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',tag:'scale'});}}
if(!prop.xaxis&&prop.yaxisScaleMin==null&&prop.xaxisPosition!='center'&&prop.yaxisTickmarksLast){RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:xpos+offsetx,y:prop.xaxisPosition==='top'?this.marginTop+offsety:(this.canvas.height-this.marginBottom),'text':prop.yaxisScaleUnitsPre+Number(0).toFixed(prop.yaxisScaleDecimals)+prop.yaxisScaleUnitsPost+offsety,valign:'center',halign:align,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',tag:'scale'});}}else if(prop.yaxisLabels&&typeof prop.yaxisLabelsSpecific==='object'){var gap=this.grapharea/prop.yaxisLabelsSpecific.length;var halign=prop.yaxisPosition=='left'?'right':'left';var bounding=false;var bgcolor=null;var ymin=prop.yaxisScaleMin!=null&&prop.yaxisScaleMin;if(prop.yaxisPosition=='left'){var x=this.marginLeft-5;if(prop.yaxisLabelsInside){x+=10;halign='left';bounding=true;bgcolor=prop.yaxisLabelsInsideColor;}}else if(prop.yaxisPosition=='right'){var x=this.canvas.width-this.marginRight+5;if(prop.yaxisLabelsInside){x-=10;halign='right';bounding=true;bgcolor=prop.yaxisLabelsInsideColor;}}
var offsetx=prop.yaxisLabelsOffsetx;var offsety=prop.yaxisLabelsOffsety;if(prop.xaxisPosition=='center'){for(var i=0;i<prop.yaxisLabelsSpecific.length;++i){var y=this.marginTop+(this.grapharea/(((prop.yaxisLabelsSpecific.length-1))*2)*i);if(ymin&&ymin>0){var y=((this.grapharea/2)/(prop.yaxisLabelsSpecific.length-(ymin?1:0)))*i;y+=this.marginTop;}
RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:x+offsetx,y:y+offsety,text:String(prop.yaxisLabelsSpecific[i]),valign:'center',halign:halign,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',tag:'ylabels.specific'});}
var reversed_labels=RGraph.arrayReverse(prop.yaxisLabelsSpecific);for(var i=0;i<reversed_labels.length;++i){var y=(this.grapharea/2)+this.marginTop+((this.grapharea/((reversed_labels.length-1)*2))*i);RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:x+offsetx,y:y+offsety,text:i==0?'':String(reversed_labels[i]),valign:'center',halign:halign,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',tag:'ylabels.specific'});}}else if(prop.xaxisPosition=='top'){var reversed_labels=RGraph.arrayReverse(prop.yaxisLabelsSpecific);for(var i=0;i<reversed_labels.length;++i){var y=(this.grapharea/(reversed_labels.length-1))*i;y=y+this.marginTop;RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:x+offsetx,y:y+offsety,text:String(reversed_labels[i]),valign:'center',halign:halign,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',tag:'ylabels.specific'});}}else{for(var i=0;i<prop.yaxisLabelsSpecific.length;++i){var y=this.marginTop+((this.grapharea/(prop.yaxisLabelsSpecific.length-1))*i);RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:x+offsetx,y:y+offsety,text:String(prop.yaxisLabelsSpecific[i]),valign:'center',halign:halign,bounding:true,boundingFill:bgcolor,boundingStroke:'rgba(0,0,0,0)',tag:'ylabels.specific'});}}}
if(prop.xaxisLabels&&prop.xaxisLabels.length>0){var yOffset=5,bordered=false,bgcolor=null
var textConf=RGraph.getTextConf({object:this,prefix:'xaxisLabels'});this.context.fillStyle=textConf.color;var angle=0,valign='top',halign='center'
if(prop.xaxisLabelsInside){yOffset=-5;bordered=prop.xaxisLabelsInsideBorder;bgcolor=prop.xaxisLabelsInsideColor;valign='bottom';}
if(prop.xaxisPosition=='top'){valign='bottom';yOffset+=2;}
if(typeof(prop.xaxisLabelsAngle)=='number'&&prop.xaxisLabelsAngle>0){angle=-1*prop.xaxisLabelsAngle;valign='center';halign='right';yOffset=10;if(prop.xaxisPosition=='top'){yOffset=10;}}
var numLabels=prop.xaxisLabels.length,offsetx=prop.xaxisLabelsOffsetx,offsety=prop.xaxisLabelsOffsety;for(i=0;i<numLabels;++i){if(prop.xaxisLabels[i]){var labelX=((this.canvas.width-this.marginLeft-this.marginRight-(2*prop.marginInner))/(numLabels-1))*i;labelX+=this.marginLeft+prop.marginInner;if(this.data.length===0||!this.data[0]||prop.xaxisLabels.length!=this.data[0].length){labelX=this.marginLeft+prop.marginInner+((this.canvas.width-this.marginLeft-this.marginRight-(2*prop.marginInner))*(i/(prop.xaxisLabels.length-1)));}
if(!labelX){labelX=this.marginLeft+prop.marginInner;}
if(prop.xaxisPosition=='top'&&prop.xaxisLabelsAngle>0){halign='left';}
if(prop.xaxisLabelsAngle!=0){halign='right';}
RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:labelX+offsetx,y:(prop.xaxisPosition=='top')?this.marginTop-yOffset-(prop.xaxisLabelsInside?-22:0)+offsety:(this.canvas.height-this.marginBottom)+yOffset+offsety,text:String(prop.xaxisLabels[i]),valign:valign,halign:halign,bounding:bordered,boundingFill:bgcolor,angle:angle,tag:'labels'});}}}
this.context.stroke();this.context.fill();};this.drawLine=function(lineData,color,fill,linewidth,tickmarks,index)
{if(prop.animationUnfoldY&&prop.animationFactor!=1){for(var i=0;i<lineData.length;++i){lineData[i]*=prop.animationFactor;}}
var penUp=false;var yPos=null;var xPos=0;this.context.lineWidth=1;var lineCoords=[];if(index>0){var prevLineCoords=this.coords2[index-1];}
var xInterval=(this.canvas.width-(2*prop.marginInner)-this.marginLeft-this.marginRight)/(lineData.length-1);for(i=0,len=lineData.length;i<len;i+=1){var data_point=lineData[i];var yPos=this.getYCoord(data_point);if(lineData[i]==null||(prop.xaxisPosition=='bottom'&&lineData[i]<this.min&&!prop.outofbounds)||(prop.xaxisPosition=='center'&&lineData[i]<(-1*this.max)&&!prop.outofbounds)||(((lineData[i]<this.min&&prop.xaxisPosition!=='center')||lineData[i]>this.max)&&!prop.outofbounds)){yPos=null;}
this.context.lineCap='round';this.context.lineJoin='round';if(i>0){xPos=xPos+xInterval;}else{xPos=prop.marginInner+this.marginLeft;}
if(prop.animationUnfoldX){xPos*=prop.animationFactor;if(xPos<prop.marginLeft){xPos=prop.marginLeft;}}
this.coords.push([xPos,yPos]);lineCoords.push([xPos,yPos]);}
this.context.stroke();this.coords2[index]=lineCoords;this.context.beginPath();this.context.strokeStyle='rgba(0,0,0,0)';if(fill){this.context.fillStyle=fill;}
var isStepped=prop.stepped;var isFilled=prop.filled;if(prop.xaxisPosition=='top'){var xAxisPos=this.marginTop;}else if(prop.xaxisPosition=='center'){var xAxisPos=this.marginTop+(this.grapharea/2);}else if(prop.xaxisPosition=='bottom'){var xAxisPos=this.getYCoord(prop.yaxisScaleMin)}
for(var i=0,len=lineCoords.length;i<len;i+=1){xPos=lineCoords[i][0];yPos=lineCoords[i][1];var set=index;var prevY=(lineCoords[i-1]?lineCoords[i-1][1]:null);var isLast=(i+1)==lineCoords.length;if(!prop.outofbounds&&(prevY<this.marginTop||prevY>(this.canvas.height-this.marginBottom))){penUp=true;}
if(i==0||penUp||!yPos||!prevY||prevY<this.marginTop){if(prop.filled&&!prop.filledRange){if(!prop.outofbounds||prevY===null||yPos===null){this.context.moveTo(xPos+1,xAxisPos);}
if(prop.xaxisPosition=='top'){this.context.moveTo(xPos+1,xAxisPos);}
if(isStepped&&i>0){this.context.lineTo(xPos,lineCoords[i-1][1]);}
this.context.lineTo(xPos,yPos);}else{if(RGraph.ISOLD&&yPos==null){}else{this.context.moveTo(xPos+1,yPos);}}
if(yPos==null){penUp=true;}else{penUp=false;}}else{if(isStepped){this.context.lineTo(xPos,lineCoords[i-1][1]);}
if((yPos>=this.marginTop&&yPos<=(this.canvas.height-this.marginBottom))||prop.outofbounds){if(isLast&&prop.filled&&!prop.filledRange&&prop.yaxisPosition=='right'){xPos-=1;}
if(!isStepped||!isLast){this.context.lineTo(xPos,yPos);if(isFilled&&lineCoords[i+1]&&lineCoords[i+1][1]==null){this.context.lineTo(xPos,xAxisPos);}}else if(isStepped&&isLast){this.context.lineTo(xPos,yPos);}
penUp=false;}else{penUp=true;}}}
if(prop.filled&&!prop.filledRange&&!prop.spline){var fillStyle=prop.filledColors;if(index>0&&prop.filledAccumulative){this.context.lineTo(xPos,prevLineCoords?prevLineCoords[i-1][1]:(this.canvas.height-this.marginBottom-1+(prop.xaxisPosition=='center'?(this.canvas.height-this.marginTop-this.marginBottom)/2:0)));for(var k=(i-1);k>=0;--k){this.context.lineTo(k==0?prevLineCoords[k][0]+1:prevLineCoords[k][0],prevLineCoords[k][1]);}}else{if(prop.xaxisPosition=='top'){this.context.lineTo(xPos,prop.marginTop+1);this.context.lineTo(lineCoords[0][0],prop.marginTop+1);}else if(typeof(lineCoords[i-1][1])=='number'){var yPosition=this.getYCoord(0);this.context.lineTo(xPos,yPosition);this.context.lineTo(lineCoords[0][0],yPosition);}}
this.context.fillStyle=!this.hidden(index)?fill:'rgba(0,0,0,0)';this.context.fill();this.context.beginPath();}
this.context.stroke();if(prop.backdrop){this.drawBackdrop(lineCoords,color);}
this.context.save();this.context.beginPath();if(prop.animationTraceCenter){this.context.rect((this.canvas.width/2)*(1-prop.animationTraceClip),0,this.canvas.width*prop.animationTraceClip,this.canvas.height);}else{this.context.rect(0,0,this.canvas.width*prop.animationTraceClip,this.canvas.height);}
this.context.clip();if(typeof prop.errorbars!=='null'){this.drawErrorbars();}
this.setShadow(index);this.redrawLine(lineCoords,color,linewidth,index);this.context.stroke();RGraph.noShadow(this);for(var i=0;i<lineCoords.length;++i){i=Number(i);this.context.strokeStyle=color;if(isStepped&&i==(lineCoords.length-1)){this.context.beginPath();}
if((tickmarks!='endcircle'&&tickmarks!='endsquare'&&tickmarks!='filledendsquare'&&tickmarks!='endtick'&&tickmarks!='endtriangle'&&tickmarks!='arrow'&&tickmarks!='filledarrow')||(i==0&&tickmarks!='arrow'&&tickmarks!='filledarrow')||i==(lineCoords.length-1)){var prevX=(i<=0?null:lineCoords[i-1][0]);var prevY=(i<=0?null:lineCoords[i-1][1]);this.drawTick(lineData,lineCoords[i][0],lineCoords[i][1],color,false,prevX,prevY,tickmarks,i,index);}}
this.context.restore();this.context.beginPath();this.context.arc(this.canvas.width+50000,this.canvas.height+50000,2,0,6.38,1);};this.drawTick=function(lineData,xPos,yPos,color,isShadow,prevX,prevY,tickmarks,index,dataset)
{if(this.hidden(dataset)){return;}else if(RGraph.isNull(yPos)){return false;}else if((yPos>(this.canvas.height-this.marginBottom))&&!prop.outofbounds){return;}else if((yPos<this.marginTop)&&!prop.outofbounds){return;}
this.context.beginPath();var offset=0;this.context.lineWidth=prop.tickmarksLinewidth?prop.tickmarksLinewidth:prop.linewidth;this.context.strokeStyle=isShadow?prop.shadowColor:this.context.strokeStyle;this.context.fillStyle=isShadow?prop.shadowColor:this.context.strokeStyle;if(tickmarks=='circle'||tickmarks=='filledcircle'||tickmarks=='endcircle'||tickmarks==='filledendcircle'){if(tickmarks=='circle'||tickmarks=='filledcircle'||((tickmarks=='endcircle'||tickmarks==='filledendcircle')&&(index==0||index==(lineData.length-1)))){this.context.beginPath();this.context.arc(xPos+offset,yPos+offset,prop.tickmarksSize,0,360/(180/RGraph.PI),false);if(tickmarks.indexOf('filled')!==-1){this.context.fillStyle=isShadow?prop.shadowColor:this.context.strokeStyle;}else{this.context.fillStyle=isShadow?prop.shadowColor:'white';}
this.context.stroke();this.context.fill();}}else if(tickmarks=='halftick'){this.context.beginPath();this.context.moveTo(Math.round(xPos),yPos);this.context.lineTo(Math.round(xPos),yPos+prop.tickmarksSize);this.context.stroke();}else if(tickmarks=='tick'){this.context.beginPath();this.context.moveTo(Math.round(xPos),yPos-prop.tickmarksSize);this.context.lineTo(Math.round(xPos),yPos+prop.tickmarksSize);this.context.stroke();}else if(tickmarks=='endtick'&&(index==0||index==(lineData.length-1))){this.context.beginPath();this.context.moveTo(Math.round(xPos),yPos-prop.tickmarksSize);this.context.lineTo(Math.round(xPos),yPos+prop.tickmarksSize);this.context.stroke();}else if(tickmarks=='cross'){this.context.beginPath();var ticksize=prop.tickmarksSize;this.context.moveTo(xPos-ticksize,yPos-ticksize);this.context.lineTo(xPos+ticksize,yPos+ticksize);this.context.moveTo(xPos+ticksize,yPos-ticksize);this.context.lineTo(xPos-ticksize,yPos+ticksize);this.context.stroke();}else if(tickmarks=='triangle'||tickmarks=='filledtriangle'||(tickmarks=='endtriangle'&&(index==0||index==(lineData.length-1)))){this.context.beginPath();if(tickmarks=='filledtriangle'){this.context.fillStyle=isShadow?prop.shadowColor:this.context.strokeStyle;}else{this.context.fillStyle='white';}
this.context.moveTo(Math.round(xPos-prop.tickmarksSize),yPos+prop.tickmarksSize);this.context.lineTo(Math.round(xPos),yPos-prop.tickmarksSize);this.context.lineTo(Math.round(xPos+prop.tickmarksSize),yPos+prop.tickmarksSize);this.context.closePath();this.context.stroke();this.context.fill();}else if(tickmarks=='borderedcircle'||tickmarks=='dot'){this.context.lineWidth=prop.tickmarksStyleDotLinewidth||0.00000001;this.path({path:'b a % % % % % false c f % s %',args:[xPos,yPos,prop.tickmarksSize,0,360/(180/RGraph.PI),prop.tickmarksStyleDotFill||color,prop.tickmarksStyleDotStroke||color]});}else if(tickmarks=='square'||tickmarks=='filledsquare'||(tickmarks=='endsquare'&&(index==0||index==(lineData.length-1)))||(tickmarks=='filledendsquare'&&(index==0||index==(lineData.length-1)))){this.context.fillStyle='white';this.context.strokeStyle=this.context.strokeStyle;this.context.beginPath();this.context.rect(Math.round(xPos-prop.tickmarksSize),Math.round(yPos-prop.tickmarksSize),prop.tickmarksSize*2,prop.tickmarksSize*2);if(tickmarks=='filledsquare'||tickmarks=='filledendsquare'){this.context.fillStyle=isShadow?prop.shadowColor:this.context.strokeStyle;this.context.rect(Math.round(xPos-prop.tickmarksSize),Math.round(yPos-prop.tickmarksSize),prop.tickmarksSize*2,prop.tickmarksSize*2);}else if(tickmarks=='square'||tickmarks=='endsquare'){this.context.fillStyle=isShadow?prop.shadowColor:'white';this.context.rect(Math.round((xPos-prop.tickmarksSize)+1),Math.round((yPos-prop.tickmarksSize)+1),(prop.tickmarksSize*2)-2,(prop.tickmarksSize*2)-2);}
this.context.stroke();this.context.fill();}else if(tickmarks=='filledarrow'){var x=Math.abs(xPos-prevX);var y=Math.abs(yPos-prevY);if(yPos<prevY){var a=Math.atan(x/y)+1.57;}else{var a=Math.atan(y/x)+3.14;}
this.context.beginPath();this.context.moveTo(Math.round(xPos),Math.round(yPos));this.context.arc(Math.round(xPos),Math.round(yPos),7,a-0.5,a+0.5,false);this.context.closePath();this.context.stroke();this.context.fill();}else if(tickmarks=='arrow'){var orig_linewidth=this.context.lineWidth;var x=Math.abs(xPos-prevX);var y=Math.abs(yPos-prevY);this.context.lineWidth;if(yPos<prevY){var a=Math.atan(x/y)+1.57;}else{var a=Math.atan(y/x)+3.14;}
this.context.beginPath();this.context.moveTo(Math.round(xPos),Math.round(yPos));this.context.arc(Math.round(xPos),Math.round(yPos),7,a-0.5-(document.all?0.1:0.01),a-0.4,false);this.context.moveTo(Math.round(xPos),Math.round(yPos));this.context.arc(Math.round(xPos),Math.round(yPos),7,a+0.5+(document.all?0.1:0.01),a+0.5,true);this.context.stroke();this.context.fill();this.context.lineWidth=orig_linewidth;}else if(typeof tickmarks==='string'&&(tickmarks.substr(0,6)==='image:'||tickmarks.substr(0,5)==='data:'||tickmarks.substr(0,1)==='/'||tickmarks.substr(0,3)==='../'||tickmarks.substr(0,7)==='images/'||tickmarks.substr(0,4)==='src:')){var img=new Image();if(tickmarks.substr(0,6)==='image:'){img.src=tickmarks.substr(6);}else if(tickmarks.substr(0,4)==='src:'){img.src=tickmarks.substr(4);}else{img.src=tickmarks;}
var obj=this;img.onload=function()
{if(prop.tickmarksStyleImageHalign==='center')xPos-=(this.width/2);if(prop.tickmarksStyleImageHalign==='right')xPos-=this.width;if(prop.tickmarksStyleImageValign==='center')yPos-=(this.height/2);if(prop.tickmarksStyleImageValign==='bottom')yPos-=this.height;xPos+=prop.tickmarksStyleImageOffsetx;yPos+=prop.tickmarksStyleImageOffsety;obj.context.drawImage(this,xPos,yPos);};}else if(typeof(tickmarks)=='function'){tickmarks(this,lineData,lineData[index],index,xPos,yPos,color,prevX,prevY);}};this.drawRange=function()
{if(prop.filledRange&&prop.filled){if(RGraph.isNull(prop.filledRangeThreshold)){prop.filledRangeThreshold=this.ymin
prop.filledRangeThresholdColors=[prop.filledColors,prop.filledColors]}
for(var idx=0;idx<2;++idx){var threshold_colors=prop.filledRangeThresholdColors;var y=this.getYCoord(prop.filledRangeThreshold)
this.context.save();if(idx==0){this.context.beginPath();this.context.rect(0,0,this.canvas.width,y);this.context.clip();}else{this.context.beginPath();this.context.rect(0,y,this.canvas.width,this.canvas.height);this.context.clip();}
this.context.beginPath();this.context.fillStyle=(idx==1?prop.filledRangeThresholdColors[1]:prop.filledRangeThresholdColors[0]);this.context.lineWidth=!this.hidden(idx)?1:0;var len=(this.coords.length/2);for(var i=0;i<len;++i){if(!RGraph.isNull(this.coords[i][1])){if(i==0){this.context.moveTo(this.coords[i][0],this.coords[i][1])}else{this.context.lineTo(this.coords[i][0],this.coords[i][1])}}}
for(var i=this.coords.length-1;i>=len;--i){if(RGraph.isNull(this.coords[i][1])){this.context.moveTo(this.coords[i][0],this.coords[i][1])}else{this.context.lineTo(this.coords[i][0],this.coords[i][1])}}
this.context.fill();this.context.restore();}}};this.redrawLine=function(coords,color,linewidth,index)
{if(!prop.redraw||prop.filledRange){return;}
this.context.strokeStyle=(typeof(color)=='object'&&color&&color.toString().indexOf('CanvasGradient')==-1?color[0]:color);this.context.lineWidth=linewidth;if(prop.dotted||prop.dashed){if(prop.dashed){this.context.setLineDash([2,6])}else if(prop.dotted){this.context.setLineDash([1,5])}}
if(this.hidden(index)){this.context.strokeStyle='rgba(0,0,0,0)';}
if(prop.spline){this.drawCurvyLine(coords,this.hidden(index)?'rgba(0,0,0,0)':color,linewidth,index);return;}
this.context.beginPath();var len=coords.length;var width=this.canvas.width
var height=this.canvas.height;var penUp=false;for(var i=0;i<len;++i){var xPos=coords[i][0];var yPos=coords[i][1];if(i>0){var prevX=coords[i-1][0];var prevY=coords[i-1][1];}
if(((i==0&&coords[i])||(yPos<this.marginTop)||(prevY<this.marginTop)||(yPos>(height-this.marginBottom))||(i>0&&prevX>(width-this.marginRight))||(i>0&&prevY>(height-this.marginBottom))||prevY==null||penUp==true)&&(!prop.outofbounds||yPos==null||prevY==null)){if(RGraph.ISOLD&&yPos==null){}else{this.context.moveTo(coords[i][0],coords[i][1]);}
penUp=false;}else{if(prop.stepped&&i>0){this.context.lineTo(coords[i][0],coords[i-1][1]);}
this.context.lineTo(coords[i][0],coords[i][1]);penUp=false;}}
if(prop.colorsAlternate&&typeof(color)=='object'&&color[0]&&color[1]){for(var i=1;i<len;++i){var prevX=coords[i-1][0];var prevY=coords[i-1][1];if(prevY!=null&&coords[i][1]!=null){this.context.beginPath();this.context.strokeStyle=color[coords[i][1]<prevY?0:1];this.context.lineWidth=prop.linewidth;this.context.moveTo(prevX,prevY);this.context.lineTo(coords[i][0],coords[i][1]);this.context.stroke();}}}
this.context.stroke();this.context.beginPath();if(prop.dashed||prop.dotted){this.context.setLineDash([1,0]);}};this.drawBackdrop=function(coords,color)
{var size=prop.backdropSize;this.context.lineWidth=size;this.context.globalAlpha=prop.backdropAlpha;this.context.strokeStyle=color;var yCoords=[];this.context.beginPath();if(prop.spline&&!RGraph.ISOLD){for(var i=0;i<coords.length;++i){yCoords.push(coords[i][1])}
this.drawSpline(this.context,yCoords,color,null);}else{this.context.moveTo(coords[0][0],coords[0][1]);for(var j=1;j<coords.length;++j){this.context.lineTo(coords[j][0],coords[j][1]);}}
this.context.stroke();this.context.globalAlpha=1;RGraph.noShadow(this);};this.getLineWidth=function(i)
{var linewidth=prop.linewidth;if(typeof(linewidth)=='number'){return linewidth;}else if(typeof(linewidth)==='object'){if(linewidth[i]){return linewidth[i];}else{return linewidth[0];}
alert('[LINE] Error! The linewidth option should be a single number or an array of one or more numbers');}};this.getShape=function(e)
{var obj=this,mouseXY=RGraph.getMouseXY(e),mouseX=mouseXY[0],mouseY=mouseXY[1];if(arguments[1]){obj=arguments[1];}
for(var i=0;i<obj.coords.length;++i){var x=obj.coords[i][0],y=obj.coords[i][1],dataset=0,idx=i;while((idx+1)>this.data[dataset].length){idx-=this.data[dataset].length;dataset++;}
if(mouseX<=(x+prop.tooltipsHotspotSize)&&mouseX>=(x-prop.tooltipsHotspotSize)&&mouseY<=(y+prop.tooltipsHotspotSize)&&mouseY>=(y-prop.tooltipsHotspotSize)){if(RGraph.parseTooltipText){var tooltip=RGraph.parseTooltipText(prop.tooltips,i);}
if(this.hidden(dataset)){continue;}
return{object:obj,x:x,y:y,dataset:dataset,index:idx,sequentialIndex:i,tooltip:typeof tooltip==='string'?tooltip:null};}else if(prop.tooltipsHotspotXonly==true&&mouseX<=(x+prop.tooltipsHotspotSize)&&mouseX>=(x-prop.tooltipsHotspotSize)){var tooltip=RGraph.parseTooltipText(prop.tooltips,i);return{object:obj,x:x,y:y,dataset:dataset,index:idx,sequentialIndex:i,tooltip:tooltip};}}};this.drawAboveLabels=function()
{var units_pre=prop.labelsAboveUnitsPre,units_post=prop.labelsAboveUnitsPost,decimals=prop.labelsAboveDecimals,point=prop.labelsAbovePoint,thousand=prop.labelsAboveThousand,bgcolor=prop.labelsAboveBackground||'white',border=((typeof prop.labelsAboveBorder==='boolean'||typeof prop.labelsAboveBorder==='number')?prop.labelsAboveBorder:true),offsety=prop.labelsAboveOffsety,specific=prop.labelsAboveSpecific;var textConf=RGraph.getTextConf({object:this,prefix:'labelsAbove'});offsety+=textConf.size;this.context.beginPath();for(var i=0,len=this.coords.length;i<len;i+=1){var indexes=RGraph.sequentialIndexToGrouped(i,this.data),dataset=indexes[0],index=indexes[1],coords=this.coords[i];if(this.hidden(dataset)){continue;}
RGraph.text({object:this,font:textConf.font,size:textConf.size,color:textConf.color,bold:textConf.bold,italic:textConf.italic,x:coords[0],y:coords[1]-offsety,text:(specific&&specific[i])?specific[i]:(specific?'':RGraph.numberFormat({object:this,number:typeof decimals==='number'?this.data_arr[i].toFixed(decimals):this.data_arr[i],unitspre:units_pre,unitspost:units_post,point:point,thousand:thousand})),valign:'center',halign:'center',bounding:true,boundingFill:bgcolor,boundingStroke:border?'black':'rgba(0,0,0,0)',tag:'labels.above'});}};this.drawCurvyLine=function(coords,color,linewidth,index)
{var yCoords=[];for(var i=0;i<coords.length;++i){yCoords.push(coords[i][1]);}
if(prop.filled){this.context.beginPath();var xaxisY=this.getYCoord(prop.yaxisScaleMin);this.context.moveTo(coords[0][0],xaxisY);this.drawSpline(this.context,yCoords,color,index);if(prop.filledAccumulative&&index>0){for(var i=(this.coordsSpline[index-1].length-1);i>=0;i-=1){this.context.lineTo(this.coordsSpline[index-1][i][0],this.coordsSpline[index-1][i][1]);}}else{this.context.lineTo(coords[coords.length-1][0],xaxisY);}
this.context.fill();}
this.context.beginPath();this.drawSpline(this.context,yCoords,color,index);this.context.stroke();};this.getValue=function(arg)
{if(arg.length==2){var mouseX=arg[0];var mouseY=arg[1];}else{var mouseCoords=RGraph.getMouseXY(arg);var mouseX=mouseCoords[0];var mouseY=mouseCoords[1];}
var obj=this;var xaxispos=prop.xaxisPosition;if(mouseY<prop.marginTop){return xaxispos=='bottom'||xaxispos=='center'?this.max:this.min;}else if(mouseY>(this.canvas.height-prop.marginBottom)){return xaxispos=='bottom'?this.min:this.max;}
if(prop.xaxisPosition=='center'){var value=(((obj.grapharea/2)-(mouseY-prop.marginTop))/obj.grapharea)*(obj.max-obj.min);value*=2;value>0?value+=this.min:value-=this.min;return value;}else if(prop.xaxisPosition=='top'){var value=((obj.grapharea-(mouseY-prop.marginTop))/obj.grapharea)*(obj.max-obj.min);value=Math.abs(obj.max-value)* -1;return value;}else{var value=((obj.grapharea-(mouseY-prop.marginTop))/obj.grapharea)*(obj.max-obj.min)
value+=obj.min;return value;}};this.highlight=function(shape)
{if(prop.tooltipsHighlight){if(typeof prop.highlightStyle==='function'){(prop.highlightStyle)(shape);}else if(prop.highlightStyle==='halo'){var obj=shape.object,color=prop.colors[shape.dataset];obj.path('b a % % 13 0 6.2830 false f rgba(255,255,255,0.75)',shape.x,shape.y);obj.path('ga 0.15 b a % % 13 0 6.2830 false f % ga 1',shape.x,shape.y,color);obj.path('b a % % 7 0 6.2830 false f white',shape.x,shape.y);obj.path('b a % % 5 0 6.2830 false f %',shape.x,shape.y,color);}else{RGraph.Highlight.point(this,shape);}}};this.getObjectByXY=function(e)
{var mouseXY=RGraph.getMouseXY(e);if((mouseXY[0]>prop.marginLeft-5)&&mouseXY[0]<(this.canvas.width-prop.marginRight+5)&&mouseXY[1]>(prop.marginTop-5)&&mouseXY[1]<(this.canvas.height-prop.marginBottom+5)){return this;}};this.adjusting_mousemove=function(e)
{if(prop.adjustable&&RGraph.Registry.get('adjusting')&&RGraph.Registry.get('adjusting').uid==this.uid){var value=Number(this.getValue(e));var shape=RGraph.Registry.get('adjusting.shape');if(shape){RGraph.Registry.set('adjusting.shape',shape);this.original_data[shape.dataset][shape.index]=Number(value);RGraph.redrawCanvas(e.target);RGraph.fireCustomEvent(this,'onadjust');}}};this.getYCoord=function(value)
{if(typeof(value)!='number'){return null;}
var y;var xaxispos=prop.xaxisPosition;if(xaxispos=='top'){y=((value-this.min)/(this.max-this.min))*this.grapharea;if(prop.yaxisScaleInvert){y=this.grapharea-y;}
y=y+this.marginTop}else if(xaxispos=='center'){y=((value-this.min)/(this.max-this.min))*(this.grapharea/2);y=(this.grapharea/2)-y;y+=this.marginTop;}else{if((value<this.min||value>this.max)&&prop.outofbounds==false){return null;}
y=((value-this.min)/(this.max-this.min))*this.grapharea;if(prop.yaxisScaleInvert){y=this.grapharea-y;}
y=this.canvas.height-this.marginBottom-y;}
return y;};this.drawSpline=function(context,coords,color,index)
{this.coordsSpline[index]=[];var xCoords=[];var marginLeft=prop.marginLeft;var marginRight=prop.marginRight;var hmargin=prop.marginInner;var interval=(this.canvas.width-(marginLeft+marginRight)-(2*hmargin))/(coords.length-1);this.context.strokeStyle=color;for(var i=0,len=coords.length;i<len;i+=1){if(typeof coords[i]=='object'&&coords[i]&&coords[i].length==2){coords[i]=Number(coords[i][1]);}}
var P=[coords[0]];for(var i=0;i<coords.length;++i){P.push(coords[i]);}
P.push(coords[coords.length-1]+(coords[coords.length-1]-coords[coords.length-2]));for(var j=1;j<P.length-2;++j){for(var t=0;t<10;++t){var yCoord=Spline(t/10,P[j-1],P[j],P[j+1],P[j+2]);xCoords.push(((j-1)*interval)+(t*(interval/10))+marginLeft+hmargin);this.context.lineTo(xCoords[xCoords.length-1],yCoord);if(typeof index=='number'){this.coordsSpline[index].push([xCoords[xCoords.length-1],yCoord]);}}}
this.context.lineTo(((j-1)*interval)+marginLeft+hmargin,P[j]);if(typeof index=='number'){this.coordsSpline[index].push([((j-1)*interval)+marginLeft+hmargin,P[j]]);}
function Spline(t,P0,P1,P2,P3)
{return 0.5*((2*P1)+
((0-P0)+P2)*t+
((2*P0-(5*P1)+(4*P2)-P3)*(t*t)+
((0-P0)+(3*P1)-(3*P2)+P3)*(t*t*t)));}};this.parseColors=function()
{if(this.original_colors.length===0){this.original_colors.colors=RGraph.arrayClone(prop.colors);this.original_colors.fillledColors=RGraph.arrayClone(prop.filledColors);this.original_colors.keyColors=RGraph.arrayClone(prop.keyColors);this.original_colors.backgroundBarsColor1=prop.backgroundBarsColor1;this.original_colors.backgroundBarsColor2=prop.backgroundBarsColor2;this.original_colors.backgroundGridColor=prop.backgroundGridColor;this.original_colors.backgroundColor=prop.backgroundColor;this.original_colors.textColor=prop.textColor;this.original_colors.crosshairsColor=prop.crosshairsColor;this.original_colors.annotatableColor=prop.annotatableColor;this.original_colors.titleColor=prop.titleColor;this.original_colors.xaxisTitleColor=prop.xaxisTitleColor;this.original_colors.yaxisTitleColor=prop.yaxisTitleColor;this.original_colors.keyBackground=prop.keyBackground;this.original_colors.axesColor=prop.axesColor;this.original_colors.highlightFill=prop.highlightFill;}
for(var i=0;i<prop.colors.length;++i){if(typeof(prop.colors[i])=='object'&&prop.colors[i][0]&&prop.colors[i][1]){prop.colors[i][0]=this.parseSingleColorForGradient(prop.colors[i][0]);prop.colors[i][1]=this.parseSingleColorForGradient(prop.colors[i][1]);}else{prop.colors[i]=this.parseSingleColorForGradient(prop.colors[i]);}}
if(prop.filledColors){if(typeof(prop.filledColors)=='string'){prop.filledColors=this.parseSingleColorForGradient(prop.filledColors,'vertical');}else{for(var i=0;i<prop.filledColors.length;++i){prop.filledColors[i]=this.parseSingleColorForGradient(prop.filledColors[i],'vertical');}}}
if(!RGraph.isNull(prop.keyColors)){for(var i=0;i<prop.keyColors.length;++i){prop.keyColors[i]=this.parseSingleColorForGradient(prop.keyColors[i]);}}
var properties=['backgroundBarsColor1','backgroundBarsColor2','backgroundGridColor','backgroundColor','crosshairsColor','annotatableColor','textColor','titleColor','xaxisTitleColor','yaxisTitleColor','keyBackground','axesColor','highlightFill'];for(var i=0;i<properties.length;++i){prop[properties[i]]=this.parseSingleColorForGradient(prop[properties[i]]);}};this.reset=function()
{};this.parseSingleColorForGradient=function(color)
{if(!color||typeof(color)!='string'){return color;}
var dir=typeof(arguments[1])=='string'?arguments[1]:'vertical';if(typeof color==='string'&&color.match(/^gradient\((.*)\)$/i)){if(color.match(/^gradient\(({.*})\)$/i)){return RGraph.parseJSONGradient({object:this,def:RegExp.$1});}
var parts=RegExp.$1.split(':');if(dir=='horizontal'){var grad=this.context.createLinearGradient(0,0,this.canvas.width,0);}else{var grad=this.context.createLinearGradient(0,this.canvas.height-prop.marginBottom,0,prop.marginTop);}
var diff=1/(parts.length-1);grad.addColorStop(0,RGraph.trim(parts[0]));for(var j=1;j<parts.length;++j){grad.addColorStop(j*diff,RGraph.trim(parts[j]));}}
return grad?grad:color;};this.setShadow=function(i)
{if(prop.shadow){var shadowColor=prop.shadowColor;if(typeof shadowColor=='object'&&shadowColor[i-1]){this.context.shadowColor=shadowColor[i];}else if(typeof shadowColor=='object'){this.context.shadowColor=shadowColor[0];}else if(typeof shadowColor=='string'){this.context.shadowColor=shadowColor;}
this.context.shadowBlur=prop.shadowBlur;this.context.shadowOffsetX=prop.shadowOffsetx;this.context.shadowOffsetY=prop.shadowOffsety;}};this.interactiveKeyHighlight=function(index)
{var coords=this.coords2[index];if(coords){var pre_linewidth=this.context.lineWidth;var pre_linecap=this.context.lineCap;this.context.lineWidth=prop.linewidth+10;this.context.lineCap='round';this.context.strokeStyle=prop.keyInteractiveHighlightChartStroke;this.context.beginPath();if(prop.spline){this.drawSpline(this.context,coords,prop.keyInteractiveHighlightChart,null);}else{for(var i=0,len=coords.length;i<len;i+=1){if(i==0||RGraph.isNull(coords[i][1])||(typeof coords[i-1][1]!=undefined&&RGraph.isNull(coords[i-1][1]))){this.context.moveTo(coords[i][0],coords[i][1]);}else{this.context.lineTo(coords[i][0],coords[i][1]);}}}
this.context.stroke();this.context.lineWidth=pre_linewidth;this.context.lineCap=pre_linecap;}};this.on=function(type,func)
{if(type.substr(0,2)!=='on'){type='on'+type;}
if(typeof this[type]!=='function'){this[type]=func;}else{RGraph.addCustomEventListener(this,type,func);}
return this;};this.firstDrawFunc=function()
{};this.drawErrorbars=function()
{this.context.save();RGraph.noShadow(this);var coords=this.coords,x=0,errorbars=prop.errorbars,length=0;if(!prop.errorbarsCapped){prop.errorbarsCappedWidth=0.001;halfwidth=0.0005;}
this.context.lineWidth=prop.errorbarsLinewidth;for(var i=0;i<coords.length;++i){var halfwidth=prop.errorbarsCappedWidth/2||5,color=prop.errorbarsColor||'black';if(errorbars[i]&&typeof errorbars[i][3]==='number'){this.context.lineWidth=errorbars[i][3];}else if(typeof prop.errorbarsLinewidth==='number'){this.context.lineWidth=prop.errorbarsLinewidth;}else{this.context.lineWidth=1;}
if(typeof errorbars==='number'||typeof errorbars[i]==='number'){if(typeof errorbars==='number'){var positiveLength=this.getYCoord(this.min)-this.getYCoord(this.min+errorbars),negativeLength=positiveLength;}else{var positiveLength=this.getYCoord(this.min)-this.getYCoord(this.min+errorbars[i]),negativeLength=positiveLength;}
if(positiveLength||negativeLength){this.path({path:'lj miter lc square b m % % l % % m % % l % % l % % m % % l % % s %',args:[coords[i][0]-halfwidth,coords[i][1]+negativeLength,coords[i][0]+halfwidth,coords[i][1]+negativeLength,coords[i][0],coords[i][1]+negativeLength,coords[i][0],coords[i][1]-positiveLength,coords[i][0]-halfwidth,coords[i][1]-positiveLength,coords[i][0],coords[i][1]-positiveLength,coords[i][0]+halfwidth,coords[i][1]-positiveLength,color]});this.path({path:'lj miter lc square b m % % l % % s %',args:[coords[i][0]-halfwidth,coords[i][1]+negativeLength,coords[i][0]+halfwidth,coords[i][1]+negativeLength,color]});}}else if(typeof errorbars[i]==='object'&&!RGraph.isNull(errorbars[i])){var positiveLength=this.getYCoord(this.min)-this.getYCoord(this.min+errorbars[i][0]),negativeLength=this.getYCoord(this.min)-this.getYCoord(this.min+errorbars[i][1]);if(typeof errorbars[i][2]==='string'){color=errorbars[i][2];}
halfwidth=typeof errorbars[i][4]==='number'?errorbars[i][4]/2:halfwidth;if(typeof errorbars[i]==='object'&&typeof errorbars[i][3]==='number'){this.context.lineWidth=errorbars[i][3];}else if(typeof prop.errorbarsLinewidth==='number'){this.context.lineWidth=prop.errorbarsLinewidth;}else{this.context.lineWidth=1;}
if(!RGraph.isNull(errorbars[i][0])){this.path({path:'lc square b  m % % l % % l % % m % % l % % s %',args:[coords[i][0],coords[i][1],coords[i][0],coords[i][1]-positiveLength,coords[i][0]-halfwidth,Math.round(coords[i][1]-positiveLength),coords[i][0],Math.round(coords[i][1]-positiveLength),coords[i][0]+halfwidth,Math.round(coords[i][1]-positiveLength),color]});}
if(typeof errorbars[i][1]==='number'){var negativeLength=Math.abs(this.getYCoord(errorbars[i][1])-this.getYCoord(0));this.path({path:'b m % % l % % l % % m % % l % % s %',args:[coords[i][0],coords[i][1],coords[i][0],coords[i][1]+negativeLength,coords[i][0]-halfwidth,Math.round(coords[i][1]+negativeLength),coords[i][0],Math.round(coords[i][1]+negativeLength),coords[i][0]+halfwidth,Math.round(coords[i][1]+negativeLength),color]});}}}
this.context.restore();};this.hide=function()
{if(typeof arguments[0]==='number'){prop.lineVisible[arguments[0]]=false;}else if(typeof arguments[0]==='object'){for(var i=0;i<arguments[0].length;++i){prop.lineVisible[arguments[0][i]]=false;}}else{for(var i=0;i<this.original_data.length;++i){prop.lineVisible[i]=false;}}
RGraph.redraw();return this;};this.show=function()
{if(typeof arguments[0]==='number'){prop.lineVisible[arguments[0]]=true;}else if(typeof arguments[0]==='object'){for(var i=0;i<arguments[0].length;++i){prop.lineVisible[arguments[0][i]]=true;}}else{for(var i=0;i<this.original_data.length;++i){prop.lineVisible[i]=true;}}
RGraph.redraw();return this;};this.hidden=function(index)
{return!prop.lineVisible[index];};this.unfold=function()
{var obj=this,opt=arguments[0]?arguments[0]:{},frames=opt.frames?opt.frames:30,frame=0,callback=arguments[1]?arguments[1]:function(){},initial=prop.animationUnfoldInitial;prop.animationFactor=prop.animationUnfoldInitial;function iterator()
{prop.animationFactor=((1-initial)*(frame/frames))+initial;RGraph.clear(obj.canvas);RGraph.redrawCanvas(obj.canvas);if(frame<frames){frame++;RGraph.Effects.updateCanvas(iterator);}else{callback(obj);}}
iterator();return this;};this.trace=function()
{var obj=this,callback=arguments[2],opt=arguments[0]||{},frames=opt.frames||30,frame=0,callback=arguments[1]||function(){};obj.set('animationTraceClip',0);function iterator()
{RGraph.clear(obj.canvas);RGraph.redrawCanvas(obj.canvas);if(frame++<frames){obj.set('animationTraceClip',frame/frames);RGraph.Effects.updateCanvas(iterator);}else{callback(obj);}}
iterator();return this;};this.foldtocenter=function()
{var obj=this,opt=arguments[0]||{},frames=opt.frames||30,frame=0,callback=arguments[1]||function(){},center_value=obj.scale2.max/2;obj.set('yaxisScaleMax',obj.scale2.max);var original_data=RGraph.arrayClone(obj.original_data);function iterator()
{for(var i=0,len=obj.data.length;i<len;++i){if(obj.data[i].length){for(var j=0,len2=obj.data[i].length;j<len2;++j){var dataset=obj.original_data[i];if(dataset[j]>center_value){dataset[j]=original_data[i][j]-((original_data[i][j]-center_value)*(frame/frames));}else{dataset[j]=original_data[i][j]+(((center_value-original_data[i][j])/frames)*frame);}}}}
RGraph.clear(obj.canvas);RGraph.redrawCanvas(obj.canvas)
if(frame++<frames){RGraph.Effects.updateCanvas(iterator);}else{callback(obj);}}
iterator();return this;};this.unfoldFromCenterTrace=function()
{var obj=this,opt=arguments[0]||{},frames=opt.frames||30,frame=0,data=RGraph.arrayClone(obj.original_data),callback=arguments[1]||function(){};obj.canvas.style.visibility='hidden';obj.draw();var max=obj.scale2.max;RGraph.clear(obj.canvas);obj.canvas.style.visibility='visible';var unfoldCallback=function()
{obj.original_data=data;obj.unfoldFromCenter({frames:frames/2},callback);};var half=obj.get('xaxisPosition')=='center'?obj.min:((obj.max-obj.min)/2)+obj.min;obj.set('yaxisScaleMax',obj.max);for(var i=0,len=obj.original_data.length;i<len;++i){for(var j=0;j<obj.original_data[i].length;++j){obj.original_data[i][j]=(obj.get('filled')&&obj.get('filledAccumulative')&&i>0)?0:half;}}
RGraph.clear(obj.canvas);obj.trace({frames:frames/2},unfoldCallback);return obj;};this.unfoldFromCenter=function()
{var obj=this,opt=arguments[0]||{},frames=opt.frames||30,frame=0,callback=arguments[1]||function(){};obj.canvas.style.visibility='hidden';obj.draw();var max=obj.scale2.max;RGraph.clear(obj.canvas);obj.canvas.style.visibility='visible';var center_value=obj.get('xaxisPosition')==='center'?prop.yaxisScaleMin:((obj.max-obj.min)/2)+obj.min,original_data=RGraph.arrayClone(obj.original_data),steps=null;obj.set('yaxisScaleMax',max);if(!steps){steps=[];for(var dataset=0,len=original_data.length;dataset<len;++dataset){steps[dataset]=[]
for(var i=0,len2=original_data[dataset].length;i<len2;++i){if(prop.filled&&prop.filledAccumulative&&dataset>0){steps[dataset][i]=original_data[dataset][i]/frames;obj.original_data[dataset][i]=center_value;}else{steps[dataset][i]=(original_data[dataset][i]-center_value)/frames;obj.original_data[dataset][i]=center_value;}}}}
function unfoldFromCenter()
{for(var dataset=0;dataset<original_data.length;++dataset){for(var i=0;i<original_data[dataset].length;++i){obj.original_data[dataset][i]+=steps[dataset][i];}}
RGraph.clear(obj.canvas);RGraph.redrawCanvas(obj.canvas);if(--frames>0){RGraph.Effects.updateCanvas(unfoldFromCenter);}else{obj.original_data=RGraph.arrayClone(original_data);RGraph.clear(obj.canvas);RGraph.redrawCanvas(obj.canvas);callback(obj);}}
unfoldFromCenter();return this;};this.isAdjustable=function(shape)
{if(RGraph.isNull(prop.adjustableOnly)){return true;}
if(RGraph.isArray(prop.adjustableOnly)&&prop.adjustableOnly[shape.sequentialIndex]){return true;}
return false;};RGraph.register(this);for(var i=0;i<this.original_data.length;++i){prop.lineVisible[i]=true;}
RGraph.parseObjectStyleConfig(this,conf.options);};